@model PasswordChangeViewModel
<!-- modelimiz -->
@{
    ViewData["Title"] = "PasswordChange";
    Layout = "~/Views/Member/_MemberLayout.cshtml";
}

<link rel="stylesheet"
      href="https://use.fontawesome.com/releases/v5.1.0/css/all.css"
      integrity="sha384-lKuwvrZot6UHsBSfcMvOkWwlCMgc0TaWr+30HWe3a4ltaBwTZhyTEggF5tJv8tbt"
      crossorigin="anonymous">



<hr />

@if (ViewBag.success == "true")
{   <div class="col-md-4 offset-md-4">
        <h2>Şifre Değiştirme</h2>
        <div class="alert alert-info">
            Şifreniz Güncellenmiştir.
        </div>
    </div>
}
else
{
    <div class="row">
            <div class="col-md-4 offset-md-4">
            <h2>Şifre Değiştirme</h2>
            <form asp-action="PasswordChange">
                <div asp-validation-summary="ModelOnly" class="text-danger"></div>

                <div class="form-group">
                    <label asp-for="PasswordOld" class="control-label"></label>
                    <div class="input-group" id="show_hide_password">
                        <input asp-for="PasswordOld" class="form-control" />
                        <div class="input-group-append">
                            <a class="input-group-text" id="cntrl">
                                <i class="fa fa-eye-slash"></i>
                                
                            </a>
                        </div>
                    </div>
                    
                    <span asp-validation-for="PasswordOld" class="text-danger"></span>
                </div>

                <div class="form-group">
                    <label asp-for="PasswordNew" class="control-label"></label>

                    <div class="input-group" id="show_hide_password">
                        <input asp-for="PasswordNew" class="form-control" />
                        <div class="input-group-append">
                            <a class="input-group-text" id="cntrl2">
                                
                                <i class="fa fa-eye-slash"></i>
                                
                            </a>
                        </div>
                    </div>
                    <span asp-validation-for="PasswordNew" class="text-danger"></span>
                </div>

                <div class="form-group">
                    <label asp-for="PasswordConfirm" class="control-label"></label>                  

                    <div class="input-group" id="show_hide_password">
                        <input asp-for="PasswordConfirm" class="form-control" />
                        <div class="input-group-append">
                            <a class="input-group-text" id="cntrl3">
                                <i class="fa fa-eye-slash" disable></i>
                                
                            </a>
                        </div>
                    </div>

                    <span asp-validation-for="PasswordConfirm" class="text-danger"></span>
                </div>
                <br>
                <div class="form-group mt-2">
                    <input type="submit" value="Şifre değiştir" class="btn" style="background-color:#3498DB; color: white;" />
                </div>
            </form>
        </div>
    </div>
}



<script>
    $(document).ready(function () {

        var allselects = document.querySelectorAll("div#show_hide_password");

        var alla = document.querySelectorAll("a.input-group-text");

        //alert(alla.length);

        // for (var i = 0; i < allselects.length; ++i) {
        //     allselects[i].addEventListener('click', clickFunc2);
        // }

        for (var i = 0; i < alla.length; ++i) {
            alla[i].addEventListener('click', clickFunc);
            // alert(alla[i].textContent);
            

        }
       

        // allselects[1].style.backgroundColor = "yellow";
        
        //[1].childNodes[1].style.backgroundColor = "yellow";

        // for (var i = 0; i < allselects.length; ++i) {
        //     allselects[i].addEventListener('click', clickFunc);
        //     console.log(allselects[i].);
        // }



        // $("#show_hide_password a").on('click', function (event) {
        //     event.preventDefault();
        //     if ($('#show_hide_password input').attr("type") == "text") {
        //         $('#show_hide_password input').attr('type', 'password');
        //         $('#show_hide_password i').addClass("fa-eye-slash");
        //         $('#show_hide_password i').removeClass("fa-eye");
        //     } else if ($('#show_hide_password input').attr("type") == "password") {
        //         $('#show_hide_password input').attr('type', 'text');
        //         $('#show_hide_password i').removeClass("fa-eye-slash");
        //         $('#show_hide_password i').addClass("fa-eye");
        //     }
        // });

        function clickFunc(event) {

            event.preventDefault();
            let text = event.target.tagName;

            if (text == "I") {
                if (event.target.parentNode.parentNode.parentNode.children[0].type == "password") {
                    // console.log(event.target.parentNode.parentNode.parentNode.children[0].type);
                    event.target.parentNode.parentNode.parentNode.children[0].type = "text"; 
                    console.log("1.0");

                    event.target.classList.add("fa-eye");
                    event.target.classList.remove("fa-eye-slash");

                    console.log("1.0");
                }
                else {

                    event.target.parentNode.parentNode.parentNode.children[0].type = "password";
                    console.log("1.1");

                    event.target.classList.add("fa-eye-slash");
                    event.target.classList.remove("fa-eye");

                    console.log("1.1");

                }
            }
            else if (text == "A") {

                if (event.target.parentNode.parentNode.children[0].type == "password") {
                    // console.log(event.target.parentNode.parentNode.parentNode.children[0].type);
                    event.target.parentNode.parentNode.children[0].type = "text";
                    console.log("2.0");

                    event.target.children[0].classList.add("fa-eye");
                    event.target.children[0].classList.remove("fa-eye-slash");
                    console.log("2.0");

                }
                else {

                    event.target.parentNode.parentNode.children[0].type = "password";
                    console.log("2.1");
                    event.target.children[0].classList.add("fa-eye-slash");
                    event.target.children[0].classList.remove("fa-eye");
                    console.log("2.1");
                }
            
            }
            

            // event.preventDefault();
            // if (event.target.input).attr("type") == "text") {
            //     event.target.input.attr('type', 'password');
            //     event.target.input.attr("i").addClass("fa-eye-slash");
            //     event.target.input.attr("i").removeClass("fa-eye");
                
            // } 
            // else if (event.target.input).attr("type") == "password") {
            //     event.target.input.attr('type', 'text');
            //     event.target.input.attr("i").removeClass("fa-eye-slash");
            //     event.target.input.attr("i").addClass("fa-eye");
            // }
        }

    });
</script>